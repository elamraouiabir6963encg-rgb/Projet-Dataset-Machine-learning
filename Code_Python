# ===================================================
# INSTALLATION & IMPORTS
# ===================================================
# pip install ucimlrepo seaborn matplotlib pandas numpy

from ucimlrepo import fetch_ucirepo
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# ===================================================
# CHARGEMENT DU DATASET
# ===================================================
bank_marketing = fetch_ucirepo(id=222)

X = bank_marketing.data.features
y = bank_marketing.data.targets

# Fusion features + target
df = pd.concat([X, y], axis=1)

print("âœ… AperÃ§u des donnÃ©es :")
print(df.head())

print("\nâœ… Informations gÃ©nÃ©rales :")
print(df.info())

print("\nâœ… Statistiques descriptives :")
print(df.describe())

# ===================================================
# IDENTIFICATION DES VARIABLES NUMÃ‰RIQUES
# ===================================================
num_cols = df.select_dtypes(include=['int64', 'float64']).columns

# ===================================================
# 1) VISUALISATION DES DISTRIBUTIONS : HISTOGRAMMES
# ===================================================
print("\n--- HISTOGRAMMES ---")

for col in num_cols:
    plt.figure(figsize=(6,4))
    sns.histplot(df[col], kde=True)
    plt.title(f"Distribution de {col}")
    plt.show()

    print(f"ğŸ“Œ InterprÃ©tation - {col} :")
    print(f"- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).")
    print(f"- Une asymÃ©trie indique une concentration des valeurs vers une borne.")
    print(f"- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.\n")

# ===================================================
# 2) BOXPLOTS (dÃ©tection des valeurs aberrantes)
# ===================================================
print("\n--- BOXPLOTS ---")

for col in num_cols:
    plt.figure(figsize=(6,3))
    sns.boxplot(x=df[col])
    plt.title(f"Boxplot de {col}")
    plt.show()

    print(f"ğŸ“Œ InterprÃ©tation - {col} :")
    print("- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).")
    print("- Une boÃ®te large indique une forte dispersion.")
    print("- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.\n")

# ===================================================
# 3) HEATMAP DES CORRÃ‰LATIONS
# ===================================================
print("\n--- HEATMAP DES CORRÃ‰LATIONS ---")

plt.figure(figsize=(10,6))
corr = df[num_cols].corr()
sns.heatmap(corr, annot=True, cmap="coolwarm", fmt=".2f")
plt.title("Matrice de CorrÃ©lation")
plt.show()

print("ğŸ“Œ InterprÃ©tation globale des corrÃ©lations :")
print("- Une corrÃ©lation proche de 1 ou -1 indique une relation forte.")
print("- Une valeur proche de 0 indique une indÃ©pendance.")
print("- Les relations fortes peuvent indiquer une redondance de variables.")
print("- Utile pour la sÃ©lection des variables dans les modÃ¨les prÃ©dictifs.")

# ===================================================
# 4) FEATURE ENGINEERING
# ===================================================
print("\n--- FEATURE ENGINEERING ---")

# 1ï¸âƒ£ CrÃ©ation variable 'age_group'
df['age_group'] = pd.cut(df['age'], bins=[0,30,45,60,100],
                          labels=['Jeune', 'Adulte', 'Senior', 'TrÃ¨s senior'])

# 2ï¸âƒ£ CrÃ©ation variable durÃ©e par minute
df['duration_min'] = df['duration'] / 60

# 3ï¸âƒ£ CrÃ©ation variable nombre total de contacts
df['total_contacts'] = df['campaign'] + df['previous']

print("âœ… Nouvelles variables crÃ©Ã©es :")
print(df[['age_group', 'duration_min', 'total_contacts']].head())

print("\nğŸ“Œ InterprÃ©tation des nouvelles variables :")
print("- age_group : segmentation client plus claire.")
print("- duration_min : plus interprÃ©table que les secondes.")
print("- total_contacts : estimation de la pression commerciale sur le client.")

# ===================================================
# 5) VISUALISATION FEATURE ENGINEERING
# ===================================================
plt.figure(figsize=(6,4))
sns.histplot(df['duration_min'], kde=True)
plt.title("Distribution de la durÃ©e de contact (minutes)")
plt.show()
print("ğŸ“Œ InterprÃ©tation : Les appels courts dominent â€” peu dâ€™appels longs trÃ¨s influents.")

plt.figure(figsize=(6,4))
sns.countplot(x='age_group', data=df)
plt.title("RÃ©partition par groupe d'Ã¢ge")
plt.show()
print("ğŸ“Œ InterprÃ©tation : Les adultes dominent le portefeuille clients.")

plt.figure(figsize=(6,4))
sns.histplot(df['total_contacts'], kde=True)
plt.title("Distribution du nombre total de contacts")
plt.show()
print("ğŸ“Œ InterprÃ©tation : La majoritÃ© des clients est contactÃ©e peu de fois, signe de ciblage sÃ©lectif.")

# ===================================================
# FIN
# ===================================================
print("\nâœ… ANALYSE TERMINÃ‰E WITH SUCCESS")

## RÃ©sultat du code: 
 âœ… AperÃ§u des donnÃ©es :
   age           job  marital  education default  balance housing loan  \
0   58    management  married   tertiary      no     2143     yes   no   
1   44    technician   single  secondary      no       29     yes   no   
2   33  entrepreneur  married  secondary      no        2     yes  yes   
3   47   blue-collar  married        NaN      no     1506     yes   no   
4   33           NaN   single        NaN      no        1      no   no   

  contact  day_of_week month  duration  campaign  pdays  previous poutcome   y  
0     NaN            5   may       261         1     -1         0      NaN  no  
1     NaN            5   may       151         1     -1         0      NaN  no  
2     NaN            5   may        76         1     -1         0      NaN  no  
3     NaN            5   may        92         1     -1         0      NaN  no  
4     NaN            5   may       198         1     -1         0      NaN  no  

âœ… Informations gÃ©nÃ©rales :
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 45211 entries, 0 to 45210
Data columns (total 17 columns):
 #   Column       Non-Null Count  Dtype 
---  ------       --------------  ----- 
 0   age          45211 non-null  int64 
 1   job          44923 non-null  object
 2   marital      45211 non-null  object
 3   education    43354 non-null  object
 4   default      45211 non-null  object
 5   balance      45211 non-null  int64 
 6   housing      45211 non-null  object
 7   loan         45211 non-null  object
 8   contact      32191 non-null  object
 9   day_of_week  45211 non-null  int64 
 10  month        45211 non-null  object
 11  duration     45211 non-null  int64 
 12  campaign     45211 non-null  int64 
 13  pdays        45211 non-null  int64 
 14  previous     45211 non-null  int64 
 15  poutcome     8252 non-null   object
 16  y            45211 non-null  object
dtypes: int64(7), object(10)
memory usage: 5.9+ MB
None

âœ… Statistiques descriptives :
                age        balance   day_of_week      duration      campaign  \
count  45211.000000   45211.000000  45211.000000  45211.000000  45211.000000   
mean      40.936210    1362.272058     15.806419    258.163080      2.763841   
std       10.618762    3044.765829      8.322476    257.527812      3.098021   
min       18.000000   -8019.000000      1.000000      0.000000      1.000000   
25%       33.000000      72.000000      8.000000    103.000000      1.000000   
50%       39.000000     448.000000     16.000000    180.000000      2.000000   
75%       48.000000    1428.000000     21.000000    319.000000      3.000000   
max       95.000000  102127.000000     31.000000   4918.000000     63.000000   

              pdays      previous  
count  45211.000000  45211.000000  
mean      40.197828      0.580323  
std      100.128746      2.303441  
min       -1.000000      0.000000  
25%       -1.000000      0.000000  
50%       -1.000000      0.000000  
75%       -1.000000      0.000000  
max      871.000000    275.000000  

--- HISTOGRAMMES ---
"C:\Users\hp\Desktop\Distribution de Age.png" 
ğŸ“Œ InterprÃ©tation - age :
- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).
- Une asymÃ©trie indique une concentration des valeurs vers une borne.
- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.

ğŸ“Œ InterprÃ©tation - balance :
- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).
- Une asymÃ©trie indique une concentration des valeurs vers une borne.
- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.

ğŸ“Œ InterprÃ©tation - day_of_week :
- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).
- Une asymÃ©trie indique une concentration des valeurs vers une borne.
- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.

ğŸ“Œ InterprÃ©tation - duration :
- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).
- Une asymÃ©trie indique une concentration des valeurs vers une borne.
- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.

ğŸ“Œ InterprÃ©tation - campaign :
- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).
- Une asymÃ©trie indique une concentration des valeurs vers une borne.
- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.

ğŸ“Œ InterprÃ©tation - pdays :
- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).
- Une asymÃ©trie indique une concentration des valeurs vers une borne.
- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.

ğŸ“Œ InterprÃ©tation - previous :
- La distribution permet dâ€™observer la forme gÃ©nÃ©rale (symÃ©trique, asymÃ©trique, extrÃªmes).
- Une asymÃ©trie indique une concentration des valeurs vers une borne.
- La prÃ©sence de pics suggÃ¨re des groupes de clients distincts.


--- BOXPLOTS ---
ğŸ“Œ InterprÃ©tation - age :
- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).
- Une boÃ®te large indique une forte dispersion.
- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.

ğŸ“Œ InterprÃ©tation - balance :
- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).
- Une boÃ®te large indique une forte dispersion.
- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.

ğŸ“Œ InterprÃ©tation - day_of_week :
- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).
- Une boÃ®te large indique une forte dispersion.
- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.

ğŸ“Œ InterprÃ©tation - duration :
- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).
- Une boÃ®te large indique une forte dispersion.
- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.

ğŸ“Œ InterprÃ©tation - campaign :
- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).
- Une boÃ®te large indique une forte dispersion.
- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.

ğŸ“Œ InterprÃ©tation - pdays :
- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).
- Une boÃ®te large indique une forte dispersion.
- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.

ğŸ“Œ InterprÃ©tation - previous :
- Les points isolÃ©s reprÃ©sentent des valeurs aberrantes (outliers).
- Une boÃ®te large indique une forte dispersion.
- Une asymÃ©trie de la boÃ®te suggÃ¨re une distribution biaisÃ©e.


--- HEATMAP DES CORRÃ‰LATIONS ---
ğŸ“Œ InterprÃ©tation globale des corrÃ©lations :
- Une corrÃ©lation proche de 1 ou -1 indique une relation forte.
- Une valeur proche de 0 indique une indÃ©pendance.
- Les relations fortes peuvent indiquer une redondance de variables.
- Utile pour la sÃ©lection des variables dans les modÃ¨les prÃ©dictifs.

--- FEATURE ENGINEERING ---
âœ… Nouvelles variables crÃ©Ã©es :
  age_group  duration_min  total_contacts
0    Senior      4.350000               1
1    Adulte      2.516667               1
2    Adulte      1.266667               1
3    Senior      1.533333               1
4    Adulte      3.300000               1

ğŸ“Œ InterprÃ©tation des nouvelles variables :
- age_group : segmentation client plus claire.
- duration_min : plus interprÃ©table que les secondes.
- total_contacts : estimation de la pression commerciale sur le client.
ğŸ“Œ InterprÃ©tation : Les appels courts dominent â€” peu dâ€™appels longs trÃ¨s influents.
ğŸ“Œ InterprÃ©tation : Les adultes dominent le portefeuille clients.
ğŸ“Œ InterprÃ©tation : La majoritÃ© des clients est contactÃ©e peu de fois, signe de ciblage sÃ©lectif.

âœ… ANALYSE TERMINÃ‰E WITH SUCCESS

